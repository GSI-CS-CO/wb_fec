########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

## variables #############################
PWD := $(shell pwd)

MODELSIM_INI_PATH := /home/bradomyn/modelsim/modeltech/bin/..

VCOM_FLAGS := -quiet -modelsimini modelsim.ini
VSIM_FLAGS := 
VLOG_FLAGS := -quiet -modelsimini modelsim.ini 
VMAP_FLAGS := -modelsimini modelsim.ini
VERILOG_SRC := main.sv \

VERILOG_OBJ := work/main/.main_sv \

VHDL_SRC := ../golay_encoder.vhd \
../three_bit_adder.vhd \
../full_adder.vhd \
../two_bit_adder.vhd \
../hamming_wgt.vhd \
../hamming_wgt_dec.vhd \
../golay_pkg.vhd \
../syndrome_err.vhd \
../syndrome.vhd \
../golay_decoder.vhd \

VHDL_OBJ := work/golay_encoder/.golay_encoder_vhd \
work/three_bit_adder/.three_bit_adder_vhd \
work/full_adder/.full_adder_vhd \
work/two_bit_adder/.two_bit_adder_vhd \
work/hamming_wgt/.hamming_wgt_vhd \
work/hamming_wgt_dec/.hamming_wgt_dec_vhd \
work/golay_pkg/.golay_pkg_vhd \
work/syndrome_err/.syndrome_err_vhd \
work/syndrome/.syndrome_vhd \
work/golay_decoder/.golay_decoder_vhd \

LIBS := work
LIB_IND := work/.work
## rules #################################

local: sim_pre_cmd simulation sim_post_cmd

simulation: modelsim.ini $(LIB_IND) $(VERILOG_OBJ) $(VHDL_OBJ)
$(VERILOG_OBJ) : modelsim.ini
$(VHDL_OBJ): $(LIB_IND) modelsim.ini

sim_pre_cmd:
		

sim_post_cmd:
		

modelsim.ini: $(MODELSIM_INI_PATH)/modelsim.ini
		cp $< . 2>&1
clean:
		rm -rf $(LIBS) ./modelsim.ini transcript *.vcd *.wlf
.PHONY: clean sim_pre_cmd sim_post_cmd simulation

work/.work:
	(vlib work && vmap $(VMAP_FLAGS) work && touch work/.work )|| rm -rf work 


work/main/.main_sv: main.sv \
work/golay_encoder/.golay_encoder_vhd \
../sim/driver.sv \
../sim/generator.sv \
../sim/environment.sv \
../sim/interface.sv \
../sim/transaction.sv \
../sim/test.sv \
work/golay_decoder/.golay_decoder_vhd
		vlog -work work $(VLOG_FLAGS) -sv +incdir+../sim+.  $<
		@mkdir -p $(dir $@) && touch $@ 



work/golay_encoder/.golay_encoder_vhd: ../golay_encoder.vhd \
work/golay_pkg/.golay_pkg_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/three_bit_adder/.three_bit_adder_vhd: ../three_bit_adder.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/full_adder/.full_adder_vhd: ../full_adder.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/two_bit_adder/.two_bit_adder_vhd: ../two_bit_adder.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/hamming_wgt/.hamming_wgt_vhd: ../hamming_wgt.vhd \
work/three_bit_adder/.three_bit_adder_vhd \
work/golay_pkg/.golay_pkg_vhd \
work/full_adder/.full_adder_vhd \
work/two_bit_adder/.two_bit_adder_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/hamming_wgt_dec/.hamming_wgt_dec_vhd: ../hamming_wgt_dec.vhd \
work/golay_pkg/.golay_pkg_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/golay_pkg/.golay_pkg_vhd: ../golay_pkg.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/syndrome_err/.syndrome_err_vhd: ../syndrome_err.vhd \
work/golay_pkg/.golay_pkg_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/syndrome/.syndrome_vhd: ../syndrome.vhd \
work/golay_pkg/.golay_pkg_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


work/golay_decoder/.golay_decoder_vhd: ../golay_decoder.vhd \
work/hamming_wgt/.hamming_wgt_vhd \
work/syndrome_err/.syndrome_err_vhd \
work/golay_pkg/.golay_pkg_vhd \
work/syndrome/.syndrome_vhd \
work/hamming_wgt_dec/.hamming_wgt_dec_vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@ 


